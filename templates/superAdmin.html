<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operator Checklist</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/styles.css') }}">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid d-flex align-items-center">
            <!-- Logo and Brand -->
            <div class="d-flex align-items-center">
                <img src="/static/images/2.png" width="50px" class="me-2" />
                <h5 class="navbar-brand" href="#">RAND REFINERY</h5>
            </div>
    
            <!-- ADD LOCATION Button (pushed to the right) -->
            <!--<a href="{{ url_for('submit_location') }}" class="btn btn-success btn-sm my-1 ms-auto">
                <i class="fas fa-map-marker-alt me-2"></i>ADD LOCATION
            </a>-->
            <a href="{{ url_for('logout') }}" class="btn btn-sm my-1 ms-auto">
                <i class="fas fa-right-from-bracket me-2"></i> LOGOUT
            </a>
        </div>
    </nav>
     <div class="d-flex align-items-center brand_images">
            <h2 class="text-center my-3">Welcome back, 
                {% if user%}
                {{user.name}}
                {% endif %}</h2>
            <img src="/static/images/freepik.png" width="200px" class="ms-auto" />
        </div>
    <div class="container d-flex justify-content-center align-items-center min-vh-100">
       
        <div class="card p-4 register-card">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                
                <div id="flash-message-container">
                    {% for category, message in messages %}
                      <div class="alert alert-{{ category }}" role="alert">
                        {{ message }}
                      </div>
                    {% endfor %}
                  </div>
               
            {% endif %}
        {% endwith %}
            <h2 class="text-center mb-4">Register</h2>
            <form action="/register" method="POST">
                <!-- Username Field with Icon -->
                <div class="mb-3">
                    <label for="username" class="form-label">Username</label>
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-user"></i>
                        </span>
                        <input type="text" id="username" name="username" class="form-control" placeholder="Full Names" required>
                    </div>
                </div>

                <!-- Company Number Field with Icon -->
                <div class="mb-3">
                    <label for="company_number" class="form-label">Company Number</label>
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-building"></i>
                        </span>
                        <input type="text" id="company_number" name="company_number" class="form-control" placeholder="Company Number" required>
                    </div>
                </div>

                <!-- Password Field with Icon -->
                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-lock"></i>
                        </span>
                        <input type="password" id="password" name="password" class="form-control" required>
                    </div>
                </div>

                <!-- Role Field with Icon -->
                <div class="mb-3">
                    <label for="role" class="form-label">Select Role</label>
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-user-tag"></i>
                        </span>
                        <select id="role" name="role" class="form-select" required>
                            <option value="">-- Select Role --</option>
                            <option value="master_administrator">Master Administrator</option>
                            <option value="administrator">Administrator</option>
                            <option value="operator">Operator</option>
                            <hr>
                            <option value="superadmin" class="bg-green">Super Admin</option>
                        </select>
                    </div>
                </div>

                <!-- Register Button with Icon -->
                <button type="submit" class="btn btn-success w-100">
                    <i class="fas fa-user-plus me-2"></i>Register
                </button>
               
            </form>
            <br>
            <br>
            <a href="{{url_for('login')}}"><i class="btn btn-success w-100 fas fa-sign-in-alt me-2"> Login</i> </a>
        </div>
    </div>
    <div>
        <table class="list-unstyled table table-striped">
            <thead>
                <tr>
                    
                    <th><i class="fas fa-id-card me-2"></i>COMPANY NUMBER</th>
                    <th><i class="fas fa-user me-2"></i>FULL NAMES</th>
                    <th><i class="fas fa-industry me-2"></i>ROLE</th>
                    <th>ACTION</th>
                </tr>
            </thead>
            <tbody>
                {% if users %}
                    {% for item in users %}
                        <tr>
                            
                            <td>{{ item.company_number | upper }}</td>
                            <td>{{ item.name | upper }}</td>
                            <td>{{ item.role | upper }}</td>
                            <td>
                                <a class="btn btn-danger" href="{{url_for('delete_user',id=item.id)}}" 
                                onclick="return confirmDelete();">
                                <i class="fas fa-trash-alt me-2"></i>Delete
                            </a>
                        </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center">
                            <i class="fas fa-exclamation-circle me-2"></i>There are no Administrators registered.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
<div>
    <table class="list-unstyled table table-striped">
        <thead>
            <tr>
                <th><i class="fas fa-industry me-2"></i>PLANT SECTION</th>
                <th><i class="fas fa-id-card me-2"></i>COMPANY NUMBER</th>
                <th><i class="fas fa-user me-2"></i>FULL NAMES</th>
                <th>ACTION</th>
            </tr>
        </thead>
        <tbody>
            {% if administrator %}
                {% for item in administrator %}
                    <tr>
                        <td>{{ item.plant_section | upper }}</td>
                        <td>{{ item.company_number | upper }}</td>
                        <td>{{ item.username | upper }}</td>
                        <td>
                            <!--<a class="btn btn-success btn-add-admin" href="{{url_for('delete_assigned_section',id=item.admin_id)}}">
                            <i class="fas fa-trash-alt me-2"></i>Delete
                        </a>-->
                    </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="3" class="text-center">
                        <i class="fas fa-exclamation-circle me-2"></i>There are no Administrators registered.
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Flash message fade-out
      setTimeout(function() {
        let flashMessage = document.getElementById("flash-message-container");
        if (flashMessage) {
          flashMessage.style.transition = "opacity 0.5s ease-out";
          flashMessage.style.opacity = "0";
          setTimeout(() => flashMessage.remove(), 500);  // Remove from DOM after fading out
        }
      }, 4000); // 4000ms = 4 seconds
      function confirmDelete() {
        return confirm("Are you sure you want to delete this item? This action cannot be undone.");
    }
    </script>
</body>
</html>